(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"roadmapwp-pro/new-idea-form","version":"0.1.0","title":"New Idea Form","category":"widgets","icon":"lightbulb","attributes":{"selectedStatuses":{"type":"object","default":{}},"selectedTaxonomies":{"type":"object","default":{}},"onlyLoggedInUsers":{"type":"boolean","default":false}},"description":"Displays form for submitting a new idea","example":{},"supports":{"html":false},"textdomain":"roadmapwp-pro","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}'),s=window.React,o=window.wp.blockEditor,l=window.wp.components,n=window.wp.data,a=window.wp.i18n;(0,e.registerBlockType)(t,{edit:function({attributes:e,setAttributes:t}){const r=(0,n.useSelect)((e=>e("core").getEntityRecords("taxonomy","idea-status",{per_page:-1})),[]);console.log("statuses are:",r);const c=(0,n.useSelect)((e=>{const t=e("core").getTaxonomies();return t?t.filter((e=>e.types.includes("idea")&&"idea-status"!==e.slug)):[]}),[]);console.log("taxonomies are:",c);const i=(0,n.useSelect)((e=>e("core").getEntityRecords("postType","sfwd-courses",{per_page:-1})),[]);return(0,s.createElement)("div",{...(0,o.useBlockProps)()},(0,s.createElement)(o.InspectorControls,null,(0,s.createElement)(l.PanelBody,{title:"Select Statuses for New Idea"},r&&r.map((o=>(0,s.createElement)(l.CheckboxControl,{key:o.id,label:o.name,checked:!!e.selectedStatuses[o.id],onChange:s=>((s,o)=>{const l={...e.selectedStatuses,[s]:o};t({selectedStatuses:l})})(o.id,s)})))),(0,s.createElement)(l.PanelBody,{title:"Idea Taxonomies"},c&&c.map((o=>(0,s.createElement)(l.CheckboxControl,{key:o.slug,label:o.name,checked:!!e.selectedTaxonomies[o.slug],onChange:s=>((s,o)=>{const l={...e.selectedTaxonomies,[s]:o};t({selectedTaxonomies:l})})(o.slug,s)})))),(0,s.createElement)(l.PanelBody,{title:"Access Control"},(0,s.createElement)(l.CheckboxControl,{label:"Allow only logged in users to see this form?",checked:e.onlyLoggedInUsers,onChange:e=>t({onlyLoggedInUsers:e})})),window.learndashIsActive&&window.learndashIsActive.active&&(0,s.createElement)(l.PanelBody,{title:(0,a.__)("Allow only students enrolled in the following courses to see this block:","roadmapwp-pro")},i&&i.map((o=>(0,s.createElement)(l.CheckboxControl,{key:o.id,label:o.title.rendered,checked:!!e.selectedCourses&&e.selectedCourses.includes(o.id),onChange:s=>((s,o)=>{const l=Array.isArray(e.selectedCourses)?e.selectedCourses:[];let n;n=o?[...l,s]:l.filter((e=>e!==s)),t({selectedCourses:n})})(o.id,s)}))))),(0,s.createElement)("p",null,"New Idea Form will be displayed here."))},save:function(){return null}})})();